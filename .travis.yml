dist: xenial
language: minimal

git:
  quiet: true
  submodules: false

branches:
  only:
  - master
  - deploy

env:
# Carefull, also set it in the deploy section!
- NOTES_FILE=main

services:
- docker

script:
- docker run --rm -v $(pwd):/notes blang/latex /bin/bash -c "cd /notes; ./build.sh $NOTES_FILE"
- "./test.sh $NOTES_FILE"

deploy:
  provider: releases
  api_key:
    secure: jyypFtBmjNQ/IBRY1/I8gCiTvZIMBMUptMFqkUNHnOpb2IyyejOoPo0apZdLKkCTfy/Ahs3TgvHXDFvRa7tsgTR48CTWco3BXjl7gh0BCNlWVKhrQvO9MNeBCDJul63KgblQu3PXBkHvd2G+WZyAzRHaYvDBO8lc+BY93vrBk1IDFXhAgdbTdiho9TSahFwR3s2Ga9xEoUtcfiVTAI84d0SS1XpFNvLxTsWelwjMi5faKP2qqxSdSnpAvtV+oKYIR18mvozA5bONpYlYYSuOzy6iw3nSrfxxTRyAr6AmvKprGrqb6HKUukGlUYw7Rbvkmr9K6oe+jd0r3maYev6nO8tySgO/snt3N+GV5Ya9LkTWNwD2O1hGfVNNIvy2pmwd3ypOK1Wm0uD0kaMgAGVuF93mkik6VQ60qn546FAwhiBzImRCxJUUfNA+p7EA+ELZtymez/DTM1rq65Ysh7EuoXT9X+tFXv4FEMEAm92uw82/l1mA5E57tplAyG51vNts/0tvTK/8z1WXjvI4E8gck8hpZqnjUys6ut0X0CEkcjEaRIexDFxNiRfZ9cmP0kG8K6VSD6Ul5r75QDSgydhDVY9nKyBu6T79oOX1UKQTeRbCTSE5PRZJTfnrkfpeRkbAIDZX9mV54LUUjxhp6U0W60QrostMz3IDiHYiAGsJCRE=
  file: main.pdf
  skip_cleanup: true
  on:
    repo: icl-notes/m2pm5
